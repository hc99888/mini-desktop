<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ä»£ç é¢„è§ˆå™¨ Code Previewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 10px 14px;
      border-bottom: 1px solid #1f2937;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #020617;
    }
    header .title {
      font-size: 15px;
      font-weight: 600;
    }
    header .subtitle {
      font-size: 12px;
      color: #9ca3af;
    }
    header .right {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    button {
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      background: #22c55e;
      color: #022c22;
      font-weight: 600;
    }
    button.secondary {
      background: #1f2937;
      color: #e5e7eb;
      font-weight: 400;
    }
    button:active {
      transform: translateY(1px);
    }
    main {
      flex: 1;
      display: flex;
      min-height: 0;
    }
    .pane {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 0;
      min-height: 0;
    }
    .pane.left {
      border-right: 1px solid #1f2937;
      background: #020617;
    }
    .pane.right {
      background: #020617;
    }
    .tabs {
      display: flex;
      border-bottom: 1px solid #1f2937;
      background: #020617;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 8px 0;
      font-size: 13px;
      cursor: pointer;
      color: #9ca3af;
      border-bottom: 2px solid transparent;
    }
    .tab.active {
      color: #e5e7eb;
      border-bottom-color: #22c55e;
      background: #020617;
    }
    .editor-container {
      flex: 1;
      position: relative;
      min-height: 0;
    }
    textarea {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: none;
      resize: none;
      padding: 10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      background: #020617;
      color: #e5e7eb;
      outline: none;
      line-height: 1.5;
      white-space: pre;
      overflow: auto;
    }
    iframe {
      border: none;
      width: 100%;
      height: 100%;
      background: #fff;
    }
    .hint {
      font-size: 11px;
      color: #9ca3af;
      padding: 6px 10px;
      border-bottom: 1px solid #1f2937;
    }
    @media (max-width: 768px) {
      main {
        flex-direction: column;
      }
      .pane.left {
        height: 50%;
        border-right: none;
        border-bottom: 1px solid #1f2937;
      }
      .pane.right {
        height: 50%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div>
      <div class="title">ä»£ç é¢„è§ˆå™¨ Code Previewer</div>
      <div class="subtitle">å·¦ä¾§ç¼–è¾‘ HTML / CSS / JSï¼Œç‚¹å‡»â€œè¿è¡Œâ€åœ¨å³ä¾§é¢„è§ˆ</div>
    </div>
    <div class="right">
      <button class="secondary" id="btnReset">é‡ç½®ç¤ºä¾‹</button>
      <button id="btnRun">è¿è¡Œ â–¶</button>
    </div>
  </header>

  <main>
    <section class="pane left">
      <div class="tabs">
        <div class="tab active" data-tab="html">HTML</div>
        <div class="tab" data-tab="css">CSS</div>
        <div class="tab" data-tab="js">JS</div>
      </div>
      <div class="hint">æç¤ºï¼šä½ å¯ä»¥æŠŠæˆ‘åœ¨å¯¹è¯é‡Œç»™ä½ çš„ä»£ç ç‰‡æ®µï¼ŒæŒ‰éœ€ç²˜è´´åˆ°å¯¹åº”åŒºåŸŸã€‚</div>
      <div class="editor-container">
        <textarea id="editor-html"></textarea>
        <textarea id="editor-css" style="display:none;"></textarea>
        <textarea id="editor-js" style="display:none;"></textarea>
      </div>
    </section>

    <section class="pane right">
      <div class="hint">é¢„è§ˆåŒºåŸŸï¼šç‚¹å‡»ä¸Šæ–¹â€œè¿è¡Œâ€æŒ‰é’®åˆ·æ–°å†…å®¹ã€‚</div>
      <div class="editor-container">
        <iframe id="preview"></iframe>
      </div>
    </section>
  </main>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const editorHtml = document.getElementById('editor-html');
    const editorCss = document.getElementById('editor-css');
    const editorJs = document.getElementById('editor-js');
    const btnRun = document.getElementById('btnRun');
    const btnReset = document.getElementById('btnReset');
    const preview = document.getElementById('preview');

    const defaultHtml = `<!-- åœ¨è¿™é‡Œå†™ HTML -->
<div class="card">
  <h1>ä½ å¥½ï¼Œ99888 ğŸ‘‹</h1>
  <p>è¿™æ˜¯ä½ çš„è¿·ä½ æ¡Œé¢ä¸“ç”¨ã€Œä»£ç é¢„è§ˆå™¨ Appã€ã€‚</p>
  <p>å·¦è¾¹å†™ä»£ç ï¼Œç‚¹ä¸Šé¢çš„ã€Œè¿è¡Œã€ï¼Œå³è¾¹å°±èƒ½çœ‹åˆ°æ•ˆæœã€‚</p>
  <button onclick="alert('ä»£ç çœŸçš„åœ¨è¿è¡Œï¼')">ç‚¹æˆ‘è¯•è¯•</button>
</div>`;
    const defaultCss = `/* åœ¨è¿™é‡Œå†™ CSS */
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #22c55e22, #020617 55%);
  color: #e5e7eb;
}
.card {
  max-width: 480px;
  margin: 40px auto;
  padding: 20px 18px;
  border-radius: 16px;
  background: rgba(15,23,42,0.92);
  box-shadow: 0 18px 45px rgba(0,0,0,0.55);
  border: 1px solid rgba(148,163,184,0.35);
}
h1 {
  font-size: 22px;
  margin: 0 0 8px;
}
p {
  margin: 4px 0;
  font-size: 14px;
  color: #cbd5f5;
}
button {
  margin-top: 12px;
  padding: 8px 14px;
  border-radius: 999px;
  border: none;
  background: #22c55e;
  color: #022c22;
  font-weight: 600;
  cursor: pointer;
}
button:active {
  transform: translateY(1px);
}`;
    const defaultJs = `// åœ¨è¿™é‡Œå†™ JS
console.log("æ¬¢è¿ä½¿ç”¨è¿·ä½ æ¡Œé¢ä»£ç é¢„è§ˆå™¨");`;

    function setDefaults() {
      editorHtml.value = defaultHtml;
      editorCss.value = defaultCss;
      editorJs.value = defaultJs;
      run();
    }

    function run() {
      const html = editorHtml.value;
      const css = editorCss.value;
      const js = editorJs.value;

      const doc = preview.contentDocument || preview.contentWindow.document;
      const full = `
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>é¢„è§ˆ</title>
<style>
${css}
</style>
</head>
<body>
${html}
<script>
${js}
<\/script>
</body>
</html>`;
      doc.open();
      doc.write(full);
      doc.close();
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        const name = tab.dataset.tab;
        editorHtml.style.display = name === 'html' ? 'block' : 'none';
        editorCss.style.display = name === 'css' ? 'block' : 'none';
        editorJs.style.display = name === 'js' ? 'block' : 'none';
      });
    });

    btnRun.addEventListener('click', run);
    btnReset.addEventListener('click', setDefaults);

    // åˆå§‹åŒ–
    setDefaults();
  </script>
</body>
</html>
